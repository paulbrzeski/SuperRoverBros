function init(){container=document.createElement("div"),document.body.appendChild(container),camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2e3),camera.position.z=100,scene=new THREE.Scene;var e=new THREE.AmbientLight(4473924);scene.add(e);var n=new THREE.DirectionalLight(16772829);n.position.set(0,0,1).normalize(),scene.add(n);var i=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;console.log(Math.round(n,2)+"% downloaded")}},r=function(e){};THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader);var a=new THREE.MTLLoader;a.setPath("assets/"),a.load("bike.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.setPath("assets/"),n.load("bike.obj",function(e){e.position.y=-50,e.rotation.y=Math.PI/2,bike=e,scene.add(bike)},i,r)});var o=(new THREE.TextureLoader).load("assets/road.jpg");o.wrapS=o.wrapT=THREE.RepeatWrapping,o.repeat.set(1,20),o.anisotropy=16;var t=new THREE.MeshLambertMaterial({map:o,side:THREE.DoubleSide});road=new THREE.Mesh(new THREE.PlaneGeometry(300,6e3,4,4),t),road.position.set(0,-50,-400),road.rotation.x=Math.PI/2,scene.add(road),renderer=new THREE.WebGLRenderer,renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),controls=new THREE.OrbitControls(camera,renderer.domElement),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){requestAnimationFrame(animate),render()}function render(){bike&&bike.position&&camera.lookAt(bike.position),road&&road.material&&(road.material.map.offset.y-=.05),controls.update(),renderer.render(scene,camera)}var container,controls,bike,road,camera,scene,renderer,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;init(),animate();
